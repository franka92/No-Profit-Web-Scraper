prefix skos: <http://www.w3.org/2004/02/skos/core#> 
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> 
prefix org: <http://www.w3.org/ns/org#> 
prefix vcard: <http://www.w3.org/2006/vcard/ns#> 


#Seleziona Nomi delle associazioni e località

SELECT ?nome ?loc WHERE{
?q a org:Organization;
skos:prefLabel ?nome;
org:hasSite ?s.

?s a org:Site;
org:siteAddress ?a.

?a a vcard:Location;
vcard:hasAddress ?add.

?add a vcard:Work;
vcard:locality ?loc.

}

/*Conta quante associazioni hanno una località associata*/
SELECT (count(?nome) as ?number) WHERE{
?q a org:Organization;
skos:prefLabel ?nome;
org:hasSite ?s.

?s a org:Site;
org:siteAddress ?a.

?a a vcard:Location;
vcard:hasAddress ?add.

?add a vcard:Work;
vcard:locality ?loc.

}

/*Recupera i numeri di telefono*/
SELECT ?nome ?v WHERE{
?q a org:Organization;
skos:prefLabel ?nome;
org:hasSite ?s.

?s a org:Site;
org:siteAddress ?a.

?a a vcard:Location;
vcard:hasTelephone ?tel.

?tel a vcard:Voice;
vcard:hasValue ?v

}

/*Recupera l'email*/

SELECT ?nome ?v WHERE{
?q a org:Organization;
skos:prefLabel ?nome;
org:hasSite ?s.

?s a org:Site;
org:siteAddress ?a.

?a a vcard:Location;
vcard:hasEmail ?v.


}

